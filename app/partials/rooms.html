<div ng-repeat="room in rooms">
    <div ng-if="room.api_endpoint.length" ng-init="ofirst = $first">
    <h1 ng-class="$ofirst ? 'xfirst' : ''">
        {{ room.room }}
        <span class="floor pull-right">{{ room.floor }}</span>
    </h1>
    <div ng-repeat="api_endpoint in room.api_endpoint">
        <div ng-controller="EndpointController">
            <h2>
                {{ endpoint.name }}
                <span class="pull-right"><input type="checkbox" class="collect" ng-model="selected" /></span>
            </h2>
            <!--
            <pre>{{ endpoint|json }}</pre>
            -->
            <div ng-controller="AttributesController" ng-if="endpoint">
                <span ng-repeat="attribute in attributes">
                    <div ng-if="attribute._control" class="attribute">
                        <center>
                        <div class="display"><attribute-display /></div>
                        <div class="name">{{ attribute._name }}</div>
                        <div class="value" ng-if="state && state[attribute._reading] != null">{{ state[attribute._reading] }}</div>
                        </center>
                    </div>
                </span>
                <!--
                <pre>{{ state|json }}</pre>
                -->
            </div>
        </div>
    </div>
    </div>
    <!--
    -->
</div>
<br />
<br />
